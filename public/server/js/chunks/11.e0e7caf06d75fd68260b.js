exports.ids=[11],exports.modules={"5nff":function(e,t,r){"use strict";r.r(t);var a=r("q1tI"),n=r.n(a),o=r("ZrOX"),l=r("Q/kq"),c=r("Ty5D"),i=r("9xET"),u=r.n(i),s=r("Btem"),f=r.n(s),m=r("ZPTe"),p=r.n(m),d=r("mwIZ"),y=r.n(d),b=r("Y+p1"),h=r.n(b),g=r("4IMT"),_=r.n(g),v=r("HDGS"),E=r("7++0"),w=r("24R3"),O=r("zSVi"),M=r("qiO9"),j=r("eLk5"),S=r("Falu"),k=r("T0ja"),P=r("55Ip"),x=r("VWBV"),T=r("iNPk"),N=r("QprK"),R=r.n(N),F=r("TJpk");function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=V(e);if(t){var n=V(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return D(this,r)}}function D(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return B(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Y=Object(E.a)({pageTitle:{id:"meta.title.marketplace_buy_coin",defaultMessage:"Buy Coin - Marketplace | {name}"}}),U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(l,e);var t,r,a,o=q(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),L(B(t=o.call(this,e)),"applyFilter",(function(e){t.setState({drawerState:!1},(function(){t.table.applyFilter(e)}))})),L(B(t),"clearFilter",(function(){t.setState({drawerState:!1},(function(){t.table.clearFilter()}))})),L(B(t),"toggleDrawer",(function(){t.setState((function(e){return{drawerState:!e.drawerState}}))})),L(B(t),"columns",(function(){return[{title:n.a.createElement(w.a,{defaultMessage:"Seller",id:"common.seller"}),dataIndex:"user",render:function(e){return n.a.createElement(k.a,{user:e})}},{title:n.a.createElement(w.a,{defaultMessage:"Coin",id:"common.coin"}),dataIndex:"coin_name"},{title:n.a.createElement(w.a,{defaultMessage:"Payment",id:"common.payment"}),dataIndex:"payment_method",render:function(e,t){return n.a.createElement("div",{style:{whiteSpace:"nowrap"}},n.a.createElement("span",{className:"d-block"},e.name),n.a.createElement("small",null,t.label))}},{title:n.a.createElement(w.a,{defaultMessage:"Currency",id:"common.currency"}),dataIndex:"currency"},{title:n.a.createElement(w.a,{defaultMessage:"Range",id:"common.range"}),key:"range",render:function(e,t){return n.a.createElement("span",null,n.a.createElement("span",{style:{whiteSpace:"nowrap"}},t.formatted_min_amount),n.a.createElement("span",{className:"font-weight-semi-bold mx-2"},n.a.createElement(w.a,{defaultMessage:"To",id:"common.to"})),n.a.createElement("span",{style:{whiteSpace:"nowrap"}},t.formatted_real_max_amount))}},{title:n.a.createElement(w.a,{defaultMessage:"Rate",id:"common.rate"}),dataIndex:"formatted_rate"},{title:n.a.createElement(w.a,{defaultMessage:"Margin",id:"common.margin"}),dataIndex:"profit_margin",render:function(e){return"".concat(e||0,"%")}},{title:n.a.createElement(w.a,{defaultMessage:"Action",id:"common.action"}),key:"action",fixed:"right",render:function(e,t){var r=Object(c.g)(x.a["marketplace.offer"].path,{slug:t.slug});return n.a.createElement(P.a,{to:r},n.a.createElement(_.a,{type:"default",className:"cp-btn-success",size:"small"},n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Buy",id:"common.buy"}))))}}]})),t.state={drawerState:!1},t}return t=l,(r=[{key:"componentDidUpdate",value:function(e,t,r){var a=this.props.location,n=e.location;if(!h()(a,n)){var o=y()(a,"state.filters");this.applyFilter(o)}}},{key:"getPageTitle",value:function(){return this.props.intl.formatMessage(Y.pageTitle,{name:R.a.name})}},{key:"render",value:function(){var e=this,t=this.state.drawerState,r=Object(S.b)("marketplace.buy-coin.table"),a=n.a.createElement(M.a,{onApplyFilter:this.applyFilter,onClearFilter:this.clearFilter});return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.Helmet,null,n.a.createElement("title",null,this.getPageTitle())),n.a.createElement(u.a,{gutter:8},n.a.createElement(p.a,{lg:8,xl:6},n.a.createElement(v.a,{styleName:"d-none d-lg-block",title:n.a.createElement(w.a,{defaultMessage:"Filter Result",id:"common.filter_result"})},a)),n.a.createElement(p.a,{lg:16,xl:18},n.a.createElement("div",{className:"d-block d-lg-none"},n.a.createElement(f.a,{visible:t,onClose:this.toggleDrawer,placement:"right",title:n.a.createElement(w.a,{defaultMessage:"Filter Result",id:"common.filter_result"}),closable:!1},n.a.createElement("div",{className:"p-2"},a))),n.a.createElement(v.a,{styleName:"cp-card-table",title:n.a.createElement(w.a,{defaultMessage:"Available Offers",id:"marketplace.available_offers"}),extra:n.a.createElement(_.a,{type:"primary",shape:"circle",className:"mb-0 material-shadow d-block d-lg-none",icon:"filter",onClick:this.toggleDrawer})},n.a.createElement(j.a,{route:r.url(),columns:this.columns(),className:"mt-1",ref:function(t){return e.table=t},scroll:{x:!0,y:!1},size:"middle"})))))}}])&&C(t.prototype,r),a&&C(t,a),l}(a.Component),z=Object(T.c)(O.c)(U),K=r("3OWR"),W=r.n(K),G=r("j7zX"),H=r.n(G),X=r("Ikkh"),Z=r("qu0K"),J=r.n(Z),Q=r("Pbn2"),$=r.n(Q),ee=r("0XPj"),te=r.n(ee),re=r("7GkX"),ae=r.n(re),ne=r("J2m7"),oe=r.n(ne),le=r("noZS"),ce=r.n(le),ie=r("NIJN"),ue=r.n(ie),se=r("JZM8"),fe=r.n(se),me=r("E+oP"),pe=r.n(me),de=r("+vAN"),ye=r.n(de),be=r("/MKj"),he=r("4ztd"),ge=r("fVSG"),_e=r("bt/X"),ve=r.n(_e),Ee=r("FAat"),we=r.n(Ee),Oe=r("vVgw"),Me=r("ATwu"),je=r.n(Me),Se=r("FErh"),ke=r.n(Se);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Ae(e);if(t){var n=Ae(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Fe(this,r)}}function Fe(e,t){if(t&&("object"===Pe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(l,e);var t,r,a,o=Re(l);function l(){return xe(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"getMinimumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("min_amount");if(r)return Object(T.a)(r,t)}},{key:"getMaximumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("max_amount");if(r)return Object(T.a)(r,t)}},{key:"getMarketPricePercentage",value:function(){return 100+((0,this.props.form.getFieldValue)("profit_margin")||0)}},{key:"render",value:function(){var e=this.props,t=e.form,r=e.marketplaceFee,a=e.paymentMethod,o=e.walletAccount,l=t.getFieldValue("currency"),c=this.getMinimumAmount(),i=(this.getMarketPricePercentage(),this.getMaximumAmount());return n.a.createElement(je.a,{type:"info",message:n.a.createElement("div",null,n.a.createElement("div",{className:"font-weight-medium"},n.a.createElement(w.a,{defaultMessage:"Offer Information",id:"create_offer.buy_offer_information"})),n.a.createElement("ol",{className:"mt-1 pl-3 mb-0"},o&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You are buying coin for your {wallet} account",id:"create_offer.buy_summary_wallet_account_information",values:{wallet:n.a.createElement("b",null,o.wallet.coin.name)}})),a&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You want to pay with {method}",id:"create_offer.buy_summary_payment_method_information",values:{method:n.a.createElement("b",null,a.name)}})),r&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"The escrow fee for your selected payment method is {fee}%",id:"create_offer.sell_summary_escrow_fee_information",values:{fee:n.a.createElement("b",null,r)}})),l&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"Your preferred currency of trade is {currency}",id:"create_offer.buy_summary_currency_information",values:{currency:n.a.createElement("b",null,ke()(l))}})),c&&!i&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You accept trade starting from {minimum}!",id:"create_offer.buy_summary_minimum_amount_information",values:{minimum:n.a.createElement("b",null,c)}})),i&&c&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You accept trade between {minimum} and {maximum}!",id:"create_offer.buy_summary_amount_range_information",values:{minimum:n.a.createElement("b",null,c),maximum:n.a.createElement("b",null,i)}})))),showIcon:!0})}}])&&Te(t.prototype,r),a&&Te(t,a),l}(a.Component),Ie=r("mLH4");function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Ue(e);if(t){var n=Ue(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Ye(this,r)}}function Ye(e,t){if(t&&("object"===qe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=we.a.Option,Ke=we.a.OptGroup,We=Object(E.a)({paymentMethod:{id:"create_offer.buy_select_payment_method_placeholder",defaultMessage:"Select payment method..."},currency:{id:"create_offer.buy_select_currency_placeholder",defaultMessage:"Select currency..."},walletAccount:{id:"create_offer.buy_select_wallet_account_placeholder",defaultMessage:"Select wallet account..."}}),Ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(l,e);var t,r,a,o=Le(l);function l(){return De(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,r=t.intl,a=t.accounts,o=t.currencies,l=t.paymentMethods,c=t.marketplaceFee,i=t.auth,s=t.form,f=t.visible,m=t.paymentMethod,d=t.walletAccount,y=ve()(l,(function(e){return e.category.name})),b=i.user.location;return n.a.createElement(u.a,{className:"".concat(f?"d-block":"d-none")},n.a.createElement(p.a,{xl:16,className:"mb-3"},n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Wallet Account",id:"create_offer.buy_select_wallet_account_label"}),extra:n.a.createElement(w.a,{defaultMessage:"Select your wallet account to receive funds into!",id:"create_offer.buy_select_wallet_account_extra"})},e("wallet_account",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:r.formatMessage(We.walletAccount),optionFilterProp:"children"},a.map((function(e){return n.a.createElement(ze,{key:e.id,value:e.id},e.wallet.coin.name)}))))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Fulfill payment with",id:"create_offer.buy_select_payment_method_label"})},e("payment_method",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:r.formatMessage(We.paymentMethod),optionFilterProp:"children"},ae()(y).map((function(e,t){return n.a.createElement(Ke,{key:t,label:e},y[e].map((function(e){return n.a.createElement(ze,{key:e.id,value:e.id},e.name)})))}))))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Specify currency to trade with",id:"create_offer.buy_select_currency_label"}),extra:n.a.createElement(w.a,{defaultMessage:"Your offer will be posted for the selected currency.",id:"create_offer.buy_select_currency_extra"})},e("currency",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:r.formatMessage(We.currency),optionFilterProp:"children"},ae()(o).map((function(e){return n.a.createElement(ze,{key:e,value:e},o[e].name," (",o[e].code,")")})))))),n.a.createElement(p.a,{xl:8},n.a.createElement("div",{className:"px-xl-3 ml-xl-3 cp-border-left-xl"},n.a.createElement("h1",null,n.a.createElement(w.a,{defaultMessage:"About this page",id:"create_offer.buy_about_page"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"We provide support for several payment methods. You can always suggest a new one for our team to consider.",id:"create_offer.buy_payment_method_information"})),b&&n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"This offer will be listed under your country: {country}. This is used to improve the search algorithm, your offers will still be visible for all.",id:"create_offer.buy_country_information",values:{country:n.a.createElement("b",null,n.a.createElement("span",{className:"mr-2"},b.country),n.a.createElement(Ie.a,{code:b.iso_code}))}})),n.a.createElement("div",{className:"mt-4"},n.a.createElement(Ce,{marketplaceFee:c,paymentMethod:m,walletAccount:d,form:s})))))}}])&&Be(t.prototype,r),a&&Be(t,a),l}(a.Component),He=Object(T.c)(Object(be.b)((function(e){var t=e.auth,r=e.collections.currencies;return{accounts:e.wallet.accounts,auth:new Oe.a(t),currencies:r}})))(Ge),Xe=r("5Dct"),Ze=r.n(Xe);function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=at(e);if(t){var n=at(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return tt(this,r)}}function tt(e,t){if(t&&("object"===Je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}we.a.Option,we.a.OptGroup;var nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(l,e);var t,r,a,o=et(l);function l(e){var t,r,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=rt(t),n=function(){var e=t.api,r=e.axios,a=(0,e.route)("marketplace.create-offer.price"),n=t.props,o=n.walletAccount,l=n.form.getFieldValue;t.setState({marketPriceLoading:!0});var c={wallet:o.wallet.id,currency:l("currency")};r.post(a.url(),c).then((function(e){return Object(ge.d)(e,(function(e){t.setState({marketPrice:e.price,marketPriceLoading:!1})}))})).catch((function(e){return Object(ge.a)(e,(function(){t.setState({marketPriceLoading:!1})}))}))},(a="fetchMarketPrice")in r?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,t.api=new S.a,t.state={marketPrice:null,marketPriceLoading:!1},t}return t=l,(r=[{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"getMinimumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("min_amount");if(r)return Object(T.a)(r,t)}},{key:"getMaximumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("max_amount");if(r)return Object(T.a)(r,t)}},{key:"getMarketPricePercentage",value:function(){return 100+((0,this.props.form.getFieldValue)("profit_margin")||0)}},{key:"render",value:function(){var e=this.state,t=e.marketPrice,r=e.marketPriceLoading,a=this.props,o=(a.intl,a.accounts,a.currencies,a.visible),l=a.form,c=a.marketplaceFee,i=a.paymentMethod,s=a.walletAccount,f=l.getFieldDecorator,m=l.getFieldValue,d=(this.getMinimumAmount(),this.getMarketPricePercentage()),y=(this.getMaximumAmount(),m("currency"));return n.a.createElement(u.a,{className:"".concat(o?"d-block":"d-none")},n.a.createElement(p.a,{xl:16,className:"mb-3"},n.a.createElement(J.a.Item,{labelAlign:"left",wrapperCol:{xs:16},labelCol:{xs:8},label:n.a.createElement(w.a,{defaultMessage:"Margin",id:"create_offer.buy_input_margin_label"}),extra:n.a.createElement("span",{className:"d-flex align-items-center"},t&&!isNaN(d)&&n.a.createElement("span",{className:"mr-2"},n.a.createElement(w.a,{defaultMessage:"The current market price is {marketPrice} while this offer will be sold for {price}",id:"create_offer.buy_input_margin_extra",values:{price:n.a.createElement("b",null,Object(T.a)(d*t/100,y)),marketPrice:n.a.createElement("b",null,Object(T.a)(t,y))}})),n.a.createElement($.a,{spin:r,onClick:this.fetchMarketPrice,type:"sync"}))},f("profit_margin",{initialValue:5,rules:[{type:"number",required:!0}]})(n.a.createElement(Ze.a,{style:{width:"100%"}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Min Amount",id:"create_offer.buy_input_min_amount_label"}),wrapperCol:{xs:16},labelCol:{xs:8}},f("min_amount",{rules:[{type:"number",required:!0}]})(n.a.createElement(Ze.a,{min:1,style:{width:"100%"},parser:function(e){var t=parseFloat(e);if(!isNaN(t))return t}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Max Amount",id:"create_offer.buy_input_max_amount_label"}),wrapperCol:{xs:16},labelCol:{xs:8}},f("max_amount",{rules:[{type:"number",required:!0}]})(n.a.createElement(Ze.a,{min:1,style:{width:"100%"},parser:function(e){var t=parseFloat(e);if(!isNaN(t))return t}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Time Frame",id:"create_offer.buy_input_confirmation_time_frame_label"}),extra:n.a.createElement(w.a,{defaultMessage:"Indicates the amount of time in {minutes} you will be able make their payment. The trade will automatically be canceled if you have not clicked {confirmed} button before the above payment window expires.",id:"create_offer.buy_input_confirmation_time_frame_extra",values:{confirmed:n.a.createElement("b",null,n.a.createElement(w.a,{defaultMessage:"Mark as Paid",id:"common.buy_mark_as_paid"})),minutes:n.a.createElement("b",null,"minutes")}}),wrapperCol:{xs:16},labelCol:{xs:8}},f("confirmation_time_frame",{rules:[{type:"number",required:!0,min:30,max:4350}]})(n.a.createElement(Ze.a,{min:1,step:1,style:{width:"100%"}})))),n.a.createElement(p.a,{xl:8},n.a.createElement("div",{className:"px-xl-3 ml-xl-3 cp-border-left-xl"},n.a.createElement("h1",null,n.a.createElement(w.a,{defaultMessage:"About this page",id:"create_offer.buy_about_page"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"Sellers often look for the best value and great vendor ratings. Choose a margin that you think your target seller will find attractive. Here, you can set your exact offers limits, and advanced options.",id:"create_offer.buy_margin_information"})),n.a.createElement("div",{className:"mt-4"},n.a.createElement(Ce,{marketplaceFee:c,form:l,paymentMethod:i,walletAccount:s})))))}}])&&Qe(t.prototype,r),a&&Qe(t,a),l}(a.Component),ot=Object(T.c)(Object(be.b)((function(e){var t=e.auth,r=e.collections.currencies;return{accounts:e.wallet.accounts,auth:new Oe.a(t),currencies:r}}),null,null,{forwardRef:!0}))(nt),lt=r("g4D/"),ct=r.n(lt),it=r("qPIi"),ut=r.n(it),st=r("UIqZ"),ft=r.n(st),mt=r("iJl9"),pt=r.n(mt);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=vt(e);if(t){var n=vt(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return _t(this,r)}}function _t(e,t){if(t&&("object"===dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Et=pt.a.TextArea,wt=we.a.Option,Ot=Object(E.a)({label:{id:"create_offer.buy_input_label_placeholder",defaultMessage:"Maximum of 25 characters..."},country:{id:"create_offer.buy_select_country_placeholder",defaultMessage:"Choose country of offer..."},tags:{id:"create_offer.buy_select_tags_placeholder",defaultMessage:"Select up to 3 tags..."}}),Mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(l,e);var t,r,a,o=gt(l);function l(){return yt(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,r=(e.getFieldValue,this.props),a=r.tags,o=r.visible,l=r.paymentMethod,c=r.form,i=r.intl,s=(r.accounts,r.currencies,r.countries),f=r.walletAccount,m=r.marketplaceFee,d=r.auth;return n.a.createElement(u.a,{className:"".concat(o?"d-block":"d-none")},n.a.createElement(p.a,{xl:16,className:"mb-3"},n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Terms",id:"create_offer.buy_input_terms_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This will be shown to seller before starting a trade",id:"create_offer.buy_input_terms_extra"})},t("terms",{rules:[{required:!0}]})(n.a.createElement(Et,{autoSize:{minRows:5}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Instruction",id:"create_offer.buy_input_instruction_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This will be shown to seller after starting a trade",id:"create_offer.buy_input_instruction_extra"})},t("instructions",{rules:[{required:!0}]})(n.a.createElement(Et,{autoSize:{minRows:5}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Label",id:"create_offer.buy_input_label_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This will appear after your payment method",id:"create_offer.buy_input_label_extra"})},t("label",{rules:[{required:!0,max:25}]})(n.a.createElement(pt.a,{placeholder:i.formatMessage(Ot.label)}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Tags",id:"create_offer.buy_select_tags_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This is used to improve search presence of your offer.",id:"create_offer.buy_select_tags_extra"})},t("tags",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,mode:"multiple",placeholder:i.formatMessage(Ot.tags),optionFilterProp:"children"},a.map((function(e){return n.a.createElement(wt,{key:e.id,value:e.name},e.name)}))))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Country",id:"create_offer.buy_select_country_label"})},t("country",{initialValue:y()(d.user,"location.iso_code"),rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:i.formatMessage(Ot.country),optionFilterProp:"children"},ae()(s).map((function(e){return n.a.createElement(wt,{key:e,value:ke()(e)},s[e])}))))),n.a.createElement(ft.a,null,n.a.createElement(w.a,{defaultMessage:"Privacy",id:"create_offer.buy_privacy"})),n.a.createElement(J.a.Item,null,t("privacy",{initialValue:"none"})(n.a.createElement(ut.a.Group,null,n.a.createElement(ut.a,{value:"none",className:"d-block my-3"},n.a.createElement(w.a,{defaultMessage:"None",id:"create_offer.buy_filter_none"})),n.a.createElement(ut.a,{value:"all_contacts",className:"d-block my-3"},n.a.createElement(w.a,{defaultMessage:"Show your contacts only",id:"create_offer.buy_filter_all_contacts"})),n.a.createElement(ut.a,{value:"trusted_contacts",className:"d-block my-3"},n.a.createElement(w.a,{defaultMessage:"Show your trusted contacts only",id:"create_offer.buy_filter_trusted_contacts"}))))),n.a.createElement(ft.a,null,n.a.createElement(w.a,{defaultMessage:"Requirements",id:"create_offer.buy_requirements"})),n.a.createElement(J.a.Item,{className:"mb-1"},t("require_phone_verification",{valuePropName:"checked",initialValue:!0})(n.a.createElement(ct.a,null,n.a.createElement(w.a,{defaultMessage:"Require Phone Verification",id:"create_offer.buy_require_phone_verification"})))),n.a.createElement(J.a.Item,{className:"mb-1"},t("require_email_verification",{valuePropName:"checked",initialValue:!0})(n.a.createElement(ct.a,null,n.a.createElement(w.a,{defaultMessage:"Require Email Verification",id:"create_offer.buy_require_email_verification"}))))),n.a.createElement(p.a,{xl:8},n.a.createElement("div",{className:"px-xl-3 ml-xl-3 cp-border-left-xl"},n.a.createElement("h1",null,n.a.createElement(w.a,{defaultMessage:"About this page",id:"create_offer.buy_about_page"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"When a customer clicks into your offer, your terms and instructions will tell them what to provide during the trade.",id:"create_offer.buy_terms_of_trade_information"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"You also have the option of moderating who is able to see and who is able to start trade with your offer.",id:"create_offer.buy_filter_requirements_information"})),n.a.createElement("div",{className:"mt-4"},n.a.createElement(Ce,{marketplaceFee:m,paymentMethod:l,walletAccount:f,form:c})))))}}])&&bt(t.prototype,r),a&&bt(t,a),l}(a.Component),jt=Object(T.c)(Object(be.b)((function(e){var t=e.auth,r=e.collections,a=r.currencies,n=r.countries;return{accounts:e.wallet.accounts,auth:new Oe.a(t),currencies:a,countries:n}})))(Mt),St=r("BflS");function kt(e){return(kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Ft(e);if(t){var n=Ft(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Nt(this,r)}}function Nt(e,t){if(t&&("object"===kt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Rt(e)}function Rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ct=ye.a.Step,It=Object(E.a)({createdSuccessful:{id:"create_offer.offer_created",defaultMessage:"Offer created successfully!."},updatedSuccessful:{id:"create_offer.offer_updated",defaultMessage:"Offer updated successfully!."}}),qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(l,e);var t,r,a,o=Tt(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),At(Rt(t=o.call(this,e)),"handleSubmit",(function(e){e.preventDefault();var r=t.props,a=r.form,n=r.intl,o=r.history,l=r.offer,i=t.api,u=i.axios,s=(0,i.route)("marketplace.create-offer.buy");a.validateFields((function(e,r){pe()(e)?(l&&l.id&&(r=W()({},r,{id:l.id})),u.post(s.url(),r).then((function(e){return Object(ge.c)(e,a,(function(e){t.setState({confirmLoading:!1});var r=Object(c.g)(x.a["marketplace.offer"].path,{slug:e.slug});pe()(o)||o.replace(r)}),l&&l.id?n.formatMessage(It.updatedSuccessful):n.formatMessage(It.createdSuccessful))})).catch((function(e){return Object(ge.b)(e,a,r,(function(){if(t.setState({confirmLoading:!1}),e.response&&e.response.data){var r=e.response.data.errors;pe()(r)||t.handleErrors(r)}}))})),t.setState({confirmLoading:!0})):t.handleErrors(e)}))})),At(Rt(t),"scrollToTop",(function(){if(t.props.layoutType===St.b){if("undefined"!=typeof document){var e=document.getElementById("root");e&&e.scrollTo({top:0,behavior:"smooth"})}}else"undefined"!=typeof window&&window.scrollTo({top:0,behavior:"smooth"})})),t.api=new S.a,t.state={current:0,confirmLoading:!1},t.paymentSetupFields=["wallet_account","payment_method","currency"],t.profitMarginFields=["profit_margin","min_amount","max_amount","confirmation_time_frame"],t.termsOfTradeFields=["terms","instructions","label","tags","privacy","require_phone_verification","require_email_verification"],t}return t=l,(r=[{key:"componentDidMount",value:function(){this.setOfferFields()}},{key:"setOfferFields",value:function(){var e=this.props,t=e.offer,r=e.form;if(!pe()(t)){var a=fe()(t,ue()(this.paymentSetupFields,this.profitMarginFields,this.termsOfTradeFields)),n=ce()(a,(function(e){return"object"!==kt(e)||null===e||Array.isArray(e)?e:e.id||null}));r.setFieldsValue(n)}}},{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"getMarketPlaceFee",value:function(){var e=this.props,t=e.accounts,r=e.form,a=e.paymentMethods,n=r.getFieldValue("wallet_account");n&&(this.walletAccount=oe()(t,{id:n}));var o=r.getFieldValue("payment_method");if(o&&(this.paymentMethod=oe()(a,{id:o})),this.walletAccount&&this.paymentMethod){var l=this.walletAccount.wallet,c=this.paymentMethod.wallet_fees,i=oe()(c,{wallet_id:l.id});return i&&i.marketplace_fee||l.marketplace_fee}}},{key:"handleErrors",value:function(e){var t=this,r=ae()(e),a=te()(r,this.paymentSetupFields),n=te()(r,this.profitMarginFields);a.length>0?this.setState({current:0},(function(){t.scrollToTop()})):n.length>0?this.setState({current:1},(function(){t.scrollToTop()})):this.setState({current:2},(function(){t.scrollToTop()}))}},{key:"next",value:function(){var e=this,t=this.state.current,r=this.props.form;0===t&&r.validateFields(this.paymentSetupFields,(function(t){pe()(t)&&e.setState({current:1},(function(){e.scrollToTop(),e.profitMarginRef.fetchMarketPrice()}))})),1===t&&r.validateFields(this.profitMarginFields,(function(t){pe()(t)&&e.setState({current:2},(function(){e.scrollToTop()}))}))}},{key:"prev",value:function(){var e=this,t=this.state.current;this.setState({current:t-1},(function(){e.scrollToTop()}))}},{key:"render",value:function(){var e=this,t=this.getMarketPlaceFee(),r=this.props,a=r.intl,o=r.form,l=r.offer,c=r.paymentMethods,i=r.marketplaceTags,u=this.state,s=u.current,f=u.confirmLoading;return n.a.createElement("div",null,n.a.createElement(v.a,{title:l&&l.id?n.a.createElement(w.a,{defaultMessage:"Edit Buy Offer",id:"marketplace.edit_buy_offer"}):n.a.createElement(w.a,{defaultMessage:"Create Buy Offer",id:"marketplace.create_buy_offer"})},n.a.createElement("div",{className:"mb-5 d-none d-sm-flex"},n.a.createElement(ye.a,{current:s},n.a.createElement(Ct,{title:n.a.createElement(w.a,{defaultMessage:"Payment Setup",id:"create_offer.buy_payment_setup"}),description:n.a.createElement(w.a,{defaultMessage:"Choose currency.",id:"create_offer.buy_payment_setup_desc"})}),n.a.createElement(Ct,{title:n.a.createElement(w.a,{defaultMessage:"Profit Margin",id:"create_offer.buy_profit_margin"}),description:n.a.createElement(w.a,{defaultMessage:"Set trade limits.",id:"create_offer.buy_profit_margin_desc"})}),n.a.createElement(Ct,{title:n.a.createElement(w.a,{defaultMessage:"Terms of Trade",id:"create_offer.buy_terms_of_trade"}),description:n.a.createElement(w.a,{defaultMessage:"State your terms.",id:"create_offer.buy_terms_of_trade_desc"})}))),n.a.createElement("div",{className:"mt-3"},n.a.createElement(J.a,{onSubmit:this.handleSubmit},n.a.createElement(He,{intl:a,form:o,marketplaceFee:t,paymentMethod:this.paymentMethod,walletAccount:this.walletAccount,paymentMethods:c,visible:0===s}),n.a.createElement(ot,{intl:a,form:o,paymentMethod:this.paymentMethod,walletAccount:this.walletAccount,marketplaceFee:t,ref:function(t){return e.profitMarginRef=t},visible:1===s}),n.a.createElement(jt,{intl:a,form:o,tags:i,paymentMethod:this.paymentMethod,walletAccount:this.walletAccount,marketplaceFee:t,visible:2===s}),n.a.createElement(J.a.Item,{className:"mt-4",wrapperCol:{xl:{offset:16}}},n.a.createElement("div",{className:"px-xl-3"},s>0&&n.a.createElement(_.a,{onClick:function(){return e.prev()},type:"default"},n.a.createElement($.a,{type:"double-left"}),n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Previous",id:"common.buy_previous"}))),s<2&&n.a.createElement(_.a,{className:"cp-btn-primary",onClick:function(){return e.next()},type:"default"},n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Next",id:"common.buy_next"})),n.a.createElement($.a,{type:"double-right"})),2===s&&n.a.createElement(_.a,{type:"default",loading:f,icon:"save",className:"cp-btn-success",htmlType:"submit"},n.a.createElement("span",null,l&&l.id?n.a.createElement(w.a,{defaultMessage:"Edit Offer",id:"common.buy_edit_offer"}):n.a.createElement(w.a,{defaultMessage:"Create Offer",id:"common.buy_create_offer"})))))))))}}])&&Pt(t.prototype,r),a&&Pt(t,a),l}(a.Component),Dt=Object(T.c)(Object(be.b)((function(e){var t=e.settings.layoutType,r=e.collections,a=r.marketplaceTags,n=r.currencies,o=r.paymentMethods;return{layoutType:t,accounts:e.wallet.accounts,marketplaceTags:a,currencies:n,paymentMethods:o}})),Object(he.a)(),c.i)(qt);function Bt(e){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Kt(e);if(t){var n=Kt(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return zt(this,r)}}function zt(e,t){if(t&&("object"===Bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Kt(e){return(Kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Wt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(l,e);var t,r,a,o=Ut(l);function l(){return Vt(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"getMinimumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("min_amount");if(r)return Object(T.a)(r,t)}},{key:"getMaximumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("max_amount");if(r)return Object(T.a)(r,t)}},{key:"getMarketPricePercentage",value:function(){return 100+((0,this.props.form.getFieldValue)("profit_margin")||0)}},{key:"render",value:function(){var e=this.props,t=e.form,r=e.marketplaceFee,a=e.paymentMethod,o=e.walletAccount,l=t.getFieldValue("currency"),c=this.getMinimumAmount(),i=(this.getMarketPricePercentage(),this.getMaximumAmount());return n.a.createElement(je.a,{type:"info",message:n.a.createElement("div",null,n.a.createElement("div",{className:"font-weight-medium"},n.a.createElement(w.a,{defaultMessage:"Offer Information",id:"create_offer.sell_offer_information"})),n.a.createElement("ol",{className:"mt-1 pl-3 mb-0"},o&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You are selling from your {wallet} account",id:"create_offer.sell_summary_wallet_account_information",values:{wallet:n.a.createElement("b",null,o.wallet.coin.name)}})),a&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You want to get paid with {method}",id:"create_offer.sell_summary_payment_method_information",values:{method:n.a.createElement("b",null,a.name)}})),r&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"The escrow fee for your selected payment method is {fee}%",id:"create_offer.sell_summary_escrow_fee_information",values:{fee:n.a.createElement("b",null,r)}})),l&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"Your preferred currency of trade is {currency}",id:"create_offer.sell_summary_currency_information",values:{currency:n.a.createElement("b",null,ke()(l))}})),c&&!i&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You accept trade starting from {minimum}!",id:"create_offer.sell_summary_minimum_amount_information",values:{minimum:n.a.createElement("b",null,c)}})),i&&c&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You accept trade between {minimum} and {maximum}!",id:"create_offer.sell_summary_amount_range_information",values:{minimum:n.a.createElement("b",null,c),maximum:n.a.createElement("b",null,i)}})))),showIcon:!0})}}])&&Lt(t.prototype,r),a&&Lt(t,a),l}(a.Component);function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=$t(e);if(t){var n=$t(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Qt(this,r)}}function Qt(e,t){if(t&&("object"===Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function $t(e){return($t=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var er=we.a.Option,tr=we.a.OptGroup,rr=Object(E.a)({paymentMethod:{id:"create_offer.sell_select_payment_method_placeholder",defaultMessage:"Select payment method..."},currency:{id:"create_offer.sell_select_currency_placeholder",defaultMessage:"Select currency..."},walletAccount:{id:"create_offer.sell_select_wallet_account_placeholder",defaultMessage:"Select wallet account..."}}),ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(l,e);var t,r,a,o=Jt(l);function l(){return Ht(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,r=t.intl,a=t.accounts,o=t.currencies,l=t.paymentMethods,c=t.marketplaceFee,i=t.auth,s=t.form,f=t.visible,m=t.paymentMethod,d=t.walletAccount,y=ve()(l,(function(e){return e.category.name})),b=i.user.location;return n.a.createElement(u.a,{className:"".concat(f?"d-block":"d-none")},n.a.createElement(p.a,{xl:16,className:"mb-3"},n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Sell from Wallet Account",id:"create_offer.sell_select_wallet_account_label"}),extra:n.a.createElement(w.a,{defaultMessage:"Select your wallet account to sell from!",id:"create_offer.sell_select_wallet_account_extra"})},e("wallet_account",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:r.formatMessage(rr.walletAccount),optionFilterProp:"children"},a.map((function(e){return n.a.createElement(er,{key:e.id,value:e.id},e.wallet.coin.name)}))))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Receive payment with",id:"create_offer.sell_select_payment_method_label"})},e("payment_method",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:r.formatMessage(rr.paymentMethod),optionFilterProp:"children"},ae()(y).map((function(e,t){return n.a.createElement(tr,{key:t,label:e},y[e].map((function(e){return n.a.createElement(er,{key:e.id,value:e.id},e.name)})))}))))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Specify currency to trade with",id:"create_offer.sell_select_currency_label"}),extra:n.a.createElement(w.a,{defaultMessage:"Your offer will be posted for the selected currency.",id:"create_offer.sell_select_currency_extra"})},e("currency",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:r.formatMessage(rr.currency),optionFilterProp:"children"},ae()(o).map((function(e){return n.a.createElement(er,{key:e,value:e},o[e].name," (",o[e].code,")")})))))),n.a.createElement(p.a,{xl:8},n.a.createElement("div",{className:"px-xl-3 ml-xl-3 cp-border-left-xl"},n.a.createElement("h1",null,n.a.createElement(w.a,{defaultMessage:"About this page",id:"create_offer.sell_about_page"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"We provide support for several payment methods. You can always suggest a new one for our team to consider. ",id:"create_offer.sell_payment_method_information"})),b&&n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"This offer will be listed under your country: {country}. This is used to improve the search algorithm, your offers will still be visible for all.",id:"create_offer.sell_country_information",values:{country:n.a.createElement("b",null,n.a.createElement("span",{className:"mr-2"},b.country),n.a.createElement(Ie.a,{code:b.iso_code}))}})),n.a.createElement("div",{className:"mt-4"},n.a.createElement(Wt,{marketplaceFee:c,paymentMethod:m,walletAccount:d,form:s})))))}}])&&Xt(t.prototype,r),a&&Xt(t,a),l}(a.Component),nr=Object(T.c)(Object(be.b)((function(e){var t=e.auth,r=e.collections.currencies;return{accounts:e.wallet.accounts,auth:new Oe.a(t),currencies:r}})))(ar);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function cr(e,t){return(cr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=fr(e);if(t){var n=fr(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return ur(this,r)}}function ur(e,t){if(t&&("object"===or(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return sr(e)}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}we.a.Option,we.a.OptGroup;var mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cr(e,t)}(l,e);var t,r,a,o=ir(l);function l(e){var t,r,a,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=o.call(this,e),r=sr(t),n=function(){var e=t.api,r=e.axios,a=(0,e.route)("marketplace.create-offer.price"),n=t.props,o=n.walletAccount,l=n.form.getFieldValue;t.setState({marketPriceLoading:!0});var c={wallet:o.wallet.id,currency:l("currency")};r.post(a.url(),c).then((function(e){return Object(ge.d)(e,(function(e){t.setState({marketPrice:e.price,marketPriceLoading:!1})}))})).catch((function(e){return Object(ge.a)(e,(function(){t.setState({marketPriceLoading:!1})}))}))},(a="fetchMarketPrice")in r?Object.defineProperty(r,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[a]=n,t.api=new S.a,t.state={marketPrice:null,marketPriceLoading:!1},t}return t=l,(r=[{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"getMinimumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("min_amount");if(r)return Object(T.a)(r,t)}},{key:"getMaximumAmount",value:function(){var e=this.props.form.getFieldValue,t=e("currency"),r=e("max_amount");if(r)return Object(T.a)(r,t)}},{key:"getMarketPricePercentage",value:function(){return 100+((0,this.props.form.getFieldValue)("profit_margin")||0)}},{key:"render",value:function(){var e=this.state,t=e.marketPrice,r=e.marketPriceLoading,a=this.props,o=(a.intl,a.accounts,a.currencies,a.visible),l=a.form,c=a.marketplaceFee,i=a.paymentMethod,s=a.walletAccount,f=l.getFieldDecorator,m=l.getFieldValue,d=this.getMinimumAmount(),y=this.getMarketPricePercentage(),b=this.getMaximumAmount(),h=m("currency");return n.a.createElement(u.a,{className:"".concat(o?"d-block":"d-none")},n.a.createElement(p.a,{xl:16,className:"mb-3"},n.a.createElement(J.a.Item,{labelAlign:"left",wrapperCol:{xs:16},labelCol:{xs:8},label:n.a.createElement(w.a,{defaultMessage:"Margin",id:"create_offer.sell_input_margin_label"}),extra:n.a.createElement("span",{className:"d-flex align-items-center"},t&&!isNaN(y)&&n.a.createElement("span",{className:"mr-2"},n.a.createElement(w.a,{defaultMessage:"The current market price is {marketPrice} while this offer will be sold for {price}",id:"create_offer.sell_input_margin_extra",values:{price:n.a.createElement("b",null,Object(T.a)(y*t/100,h)),marketPrice:n.a.createElement("b",null,Object(T.a)(t,h))}})),n.a.createElement($.a,{spin:r,onClick:this.fetchMarketPrice,type:"sync"}))},f("profit_margin",{initialValue:5,rules:[{type:"number",required:!0}]})(n.a.createElement(Ze.a,{style:{width:"100%"}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Min Amount",id:"create_offer.sell_input_min_amount_label"}),wrapperCol:{xs:16},labelCol:{xs:8}},f("min_amount",{rules:[{type:"number",required:!0}]})(n.a.createElement(Ze.a,{min:1,style:{width:"100%"},parser:function(e){var t=parseFloat(e);if(!isNaN(t))return t}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Max Amount",id:"create_offer.sell_input_max_amount_label"}),wrapperCol:{xs:16},labelCol:{xs:8}},f("max_amount",{rules:[{type:"number",required:!0}]})(n.a.createElement(Ze.a,{min:1,style:{width:"100%"},parser:function(e){var t=parseFloat(e);if(!isNaN(t))return t}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Time Frame",id:"create_offer.sell_input_confirmation_time_frame_label"}),extra:n.a.createElement(w.a,{defaultMessage:"Indicates the amount of time in {minutes} your buyer has to make their payment. The trade will automatically be canceled if the buyer has not clicked {confirmed} before the payment window expires.",id:"create_offer.sell_input_confirmation_time_frame_extra",values:{confirmed:n.a.createElement("b",null,n.a.createElement(w.a,{defaultMessage:"Mark as Paid",id:"common.sell_mark_as_paid"})),minutes:n.a.createElement("b",null,"minutes")}}),wrapperCol:{xs:16},labelCol:{xs:8}},f("confirmation_time_frame",{rules:[{type:"number",required:!0,min:30,max:4350}]})(n.a.createElement(Ze.a,{min:1,step:1,style:{width:"100%"}})))),n.a.createElement(p.a,{xl:8},n.a.createElement("div",{className:"px-xl-3 ml-xl-3 cp-border-left-xl"},n.a.createElement("h1",null,n.a.createElement(w.a,{defaultMessage:"About this page",id:"create_offer.sell_about_page"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"Buyers often look for the best value and great vendor ratings. Choose a margin that you think your target buyers will find attractive. Here, you can set your exact offers limits, and advanced options.",id:"create_offer.sell_margin_information"})),n.a.createElement("div",null,(b||d)&&n.a.createElement(je.a,{type:"warning",message:n.a.createElement("div",null,n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Your offer will not be shown to the public unless you comply with the following:",id:"create_offer.sell_offer_visibility_info"})),n.a.createElement("ul",{className:"mt-2 pl-3"},b&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"Your wallet account has at least {maximum} available, which is the maximum amount of your offer!",id:"create_offer.sell_offer_visibility_max_amount_requirement",values:{maximum:n.a.createElement("b",null,b)}})),!b&&d&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"Your wallet account has at least {minimum} available, which is the minimum amount of your offer!",id:"create_offer.sell_offer_visibility_min_amount_requirement",values:{minimum:n.a.createElement("b",null,d)}})))),showIcon:!0})),n.a.createElement("div",{className:"mt-4"},n.a.createElement(Wt,{marketplaceFee:c,form:l,paymentMethod:i,walletAccount:s})))))}}])&&lr(t.prototype,r),a&&lr(t,a),l}(a.Component),pr=Object(T.c)(Object(be.b)((function(e){var t=e.auth,r=e.collections.currencies;return{accounts:e.wallet.accounts,auth:new Oe.a(t),currencies:r}}),null,null,{forwardRef:!0}))(mr);function dr(e){return(dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function br(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=vr(e);if(t){var n=vr(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return _r(this,r)}}function _r(e,t){if(t&&("object"===dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Er=pt.a.TextArea,wr=we.a.Option,Or=Object(E.a)({label:{id:"create_offer.input_label_placeholder",defaultMessage:"Maximum of 25 characters..."},country:{id:"create_offer.sell_select_country_placeholder",defaultMessage:"Choose country of offer..."},tags:{id:"create_offer.select_tags_placeholder",defaultMessage:"Select up to 3 tags..."}}),Mr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(l,e);var t,r,a,o=gr(l);function l(){return yr(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,r=(e.getFieldValue,this.props),a=r.paymentMethod,o=r.walletAccount,l=r.visible,c=r.intl,i=(r.accounts,r.currencies,r.countries),s=r.marketplaceFee,f=r.form,m=r.tags,d=r.auth;return n.a.createElement(u.a,{className:"".concat(l?"d-block":"d-none")},n.a.createElement(p.a,{xl:16,className:"mb-3"},n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Terms",id:"create_offer.sell_input_terms_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This will be shown to buyer before starting a trade",id:"create_offer.sell_input_terms_extra"})},t("terms",{rules:[{required:!0}]})(n.a.createElement(Er,{autoSize:{minRows:5}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Instruction",id:"create_offer.sell_input_instruction_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This will be shown to buyer after starting a trade",id:"create_offer.sell_input_instruction_extra"})},t("instructions",{rules:[{required:!0}]})(n.a.createElement(Er,{autoSize:{minRows:5}}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Label",id:"create_offer.sell_input_label_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This will appear after your payment method",id:"create_offer.sell_input_label_extra"})},t("label",{rules:[{required:!0,max:25}]})(n.a.createElement(pt.a,{placeholder:c.formatMessage(Or.label)}))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Tags",id:"create_offer.sell_select_tags_label"}),extra:n.a.createElement(w.a,{defaultMessage:"This is used to improve search presence of your offer.",id:"create_offer.sell_select_tags_extra"})},t("tags",{rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,mode:"multiple",placeholder:c.formatMessage(Or.tags),optionFilterProp:"children"},m.map((function(e){return n.a.createElement(wr,{key:e.id,value:e.name},e.name)}))))),n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Country",id:"create_offer.sell_select_country_label"})},t("country",{initialValue:y()(d.user,"location.iso_code"),rules:[{required:!0}]})(n.a.createElement(we.a,{showSearch:!0,placeholder:c.formatMessage(Or.country),optionFilterProp:"children"},ae()(i).map((function(e){return n.a.createElement(wr,{key:e,value:ke()(e)},i[e])}))))),n.a.createElement(ft.a,null,n.a.createElement(w.a,{defaultMessage:"Privacy",id:"create_offer.sell_privacy"})),n.a.createElement(J.a.Item,null,t("privacy",{initialValue:"none"})(n.a.createElement(ut.a.Group,null,n.a.createElement(ut.a,{value:"none",className:"d-block my-3"},n.a.createElement(w.a,{defaultMessage:"None",id:"create_offer.sell_filter_none"})),n.a.createElement(ut.a,{value:"all_contacts",className:"d-block my-3"},n.a.createElement(w.a,{defaultMessage:"Show your contacts only",id:"create_offer.sell_filter_all_contacts"})),n.a.createElement(ut.a,{value:"trusted_contacts",className:"d-block my-3"},n.a.createElement(w.a,{defaultMessage:"Show your trusted contacts only",id:"create_offer.sell_filter_trusted_contacts"}))))),n.a.createElement(ft.a,null,n.a.createElement(w.a,{defaultMessage:"Requirements",id:"create_offer.sell_requirements"})),n.a.createElement(J.a.Item,{className:"mb-1"},t("require_phone_verification",{valuePropName:"checked",initialValue:!0})(n.a.createElement(ct.a,null,n.a.createElement(w.a,{defaultMessage:"Require Phone Verification",id:"create_offer.sell_require_phone_verification"})))),n.a.createElement(J.a.Item,{className:"mb-1"},t("require_email_verification",{valuePropName:"checked",initialValue:!0})(n.a.createElement(ct.a,null,n.a.createElement(w.a,{defaultMessage:"Require Email Verification",id:"create_offer.sell_require_email_verification"}))))),n.a.createElement(p.a,{xl:8},n.a.createElement("div",{className:"px-xl-3 ml-xl-3 cp-border-left-xl"},n.a.createElement("h1",null,n.a.createElement(w.a,{defaultMessage:"About this page",id:"create_offer.sell_about_page"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"When a customer clicks into your offer, your terms and instructions will tell them what to provide during the trade.",id:"create_offer.sell_terms_of_trade_information"})),n.a.createElement("p",{className:"text-justify"},n.a.createElement(w.a,{defaultMessage:"You also have the option of moderating who is able to see and who is able to start trade with your offer.",id:"create_offer.sell_filter_requirements_information"})),n.a.createElement("div",{className:"mt-4"},n.a.createElement(Wt,{marketplaceFee:s,paymentMethod:a,walletAccount:o,form:f})))))}}])&&br(t.prototype,r),a&&br(t,a),l}(a.Component),jr=Object(T.c)(Object(be.b)((function(e){var t=e.auth,r=e.collections,a=r.currencies,n=r.countries;return{accounts:e.wallet.accounts,auth:new Oe.a(t),currencies:a,countries:n}})))(Mr);function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Pr(e,t){return(Pr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Rr(e);if(t){var n=Rr(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Tr(this,r)}}function Tr(e,t){if(t&&("object"===Sr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Nr(e)}function Nr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rr(e){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ar=ye.a.Step,Cr=Object(E.a)({createdSuccessful:{id:"create_offer.offer_created",defaultMessage:"Offer created successfully!."},updatedSuccessful:{id:"create_offer.offer_updated",defaultMessage:"Offer updated successfully!."}}),Ir=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pr(e,t)}(l,e);var t,r,a,o=xr(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Fr(Nr(t=o.call(this,e)),"handleSubmit",(function(e){e.preventDefault();var r=t.props,a=r.form,n=r.intl,o=r.history,l=r.offer,i=t.api,u=i.axios,s=(0,i.route)("marketplace.create-offer.sell");a.validateFields((function(e,r){pe()(e)?(l&&l.id&&(r=W()({},r,{id:l.id})),u.post(s.url(),r).then((function(e){return Object(ge.c)(e,a,(function(e){t.setState({confirmLoading:!1});var r=Object(c.g)(x.a["marketplace.offer"].path,{slug:e.slug});pe()(o)||o.replace(r)}),l&&l.id?n.formatMessage(Cr.updatedSuccessful):n.formatMessage(Cr.createdSuccessful))})).catch((function(e){return Object(ge.b)(e,a,r,(function(){if(t.setState({confirmLoading:!1}),e.response&&e.response.data){var r=e.response.data.errors;pe()(r)||t.handleErrors(r)}}))})),t.setState({confirmLoading:!0})):t.handleErrors(e)}))})),Fr(Nr(t),"scrollToTop",(function(){if(t.props.layoutType===St.b){if("undefined"!=typeof document){var e=document.getElementById("root");e&&e.scrollTo({top:0,behavior:"smooth"})}}else"undefined"!=typeof window&&window.scrollTo({top:0,behavior:"smooth"})})),t.api=new S.a,t.state={current:0,confirmLoading:!1},t.paymentSetupFields=["wallet_account","payment_method","currency"],t.profitMarginFields=["profit_margin","min_amount","max_amount","confirmation_time_frame"],t.termsOfTradeFields=["terms","instructions","label","tags","privacy","require_phone_verification","require_email_verification"],t}return t=l,(r=[{key:"componentDidMount",value:function(){this.setOfferFields()}},{key:"setOfferFields",value:function(){var e=this.props,t=e.offer,r=e.form;if(t&&t.id){var a=fe()(t,ue()(this.paymentSetupFields,this.profitMarginFields,this.termsOfTradeFields)),n=ce()(a,(function(e){return"object"!==Sr(e)||null===e||Array.isArray(e)?e:e.id||null}));r.setFieldsValue(n)}}},{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"getMarketPlaceFee",value:function(){var e=this.props,t=e.accounts,r=e.form,a=e.paymentMethods,n=r.getFieldValue("wallet_account");n&&(this.walletAccount=oe()(t,{id:n}));var o=r.getFieldValue("payment_method");if(o&&(this.paymentMethod=oe()(a,{id:o})),this.walletAccount&&this.paymentMethod){var l=this.walletAccount.wallet,c=this.paymentMethod.wallet_fees,i=oe()(c,{wallet_id:l.id});return i&&i.marketplace_fee||l.marketplace_fee}}},{key:"handleErrors",value:function(e){var t=this,r=ae()(e),a=te()(r,this.paymentSetupFields),n=te()(r,this.profitMarginFields);a.length>0?this.setState({current:0},(function(){t.scrollToTop()})):n.length>0?this.setState({current:1},(function(){t.scrollToTop()})):this.setState({current:2},(function(){t.scrollToTop()}))}},{key:"next",value:function(){var e=this,t=this.state.current,r=this.props.form;0===t&&r.validateFields(this.paymentSetupFields,(function(t){pe()(t)&&e.setState({current:1},(function(){e.scrollToTop(),e.profitMarginRef.fetchMarketPrice()}))})),1===t&&r.validateFields(this.profitMarginFields,(function(t){pe()(t)&&e.setState({current:2},(function(){e.scrollToTop()}))}))}},{key:"prev",value:function(){var e=this,t=this.state.current;this.setState({current:t-1},(function(){e.scrollToTop()}))}},{key:"render",value:function(){var e=this,t=this.getMarketPlaceFee(),r=this.props,a=r.intl,o=r.form,l=r.offer,c=r.paymentMethods,i=r.marketplaceTags,u=this.state,s=u.current,f=u.confirmLoading;return n.a.createElement("div",null,n.a.createElement(v.a,{title:l&&l.id?n.a.createElement(w.a,{defaultMessage:"Edit Sell Offer",id:"marketplace.edit_sell_offer"}):n.a.createElement(w.a,{defaultMessage:"Create Sell Offer",id:"marketplace.create_sell_offer"})},n.a.createElement("div",{className:"mb-5 d-none d-sm-flex"},n.a.createElement(ye.a,{current:s},n.a.createElement(Ar,{title:n.a.createElement(w.a,{defaultMessage:"Payment Setup",id:"create_offer.sell_payment_setup"}),description:n.a.createElement(w.a,{defaultMessage:"Choose currency.",id:"create_offer.sell_payment_setup_desc"})}),n.a.createElement(Ar,{title:n.a.createElement(w.a,{defaultMessage:"Profit Margin",id:"create_offer.sell_profit_margin"}),description:n.a.createElement(w.a,{defaultMessage:"Set trade limits.",id:"create_offer.sell_profit_margin_desc"})}),n.a.createElement(Ar,{title:n.a.createElement(w.a,{defaultMessage:"Terms of Trade",id:"create_offer.sell_terms_of_trade"}),description:n.a.createElement(w.a,{defaultMessage:"State your terms.",id:"create_offer.sell_terms_of_trade_desc"})}))),n.a.createElement("div",{className:"mt-3"},n.a.createElement(J.a,{onSubmit:this.handleSubmit},n.a.createElement(nr,{intl:a,form:o,marketplaceFee:t,paymentMethod:this.paymentMethod,walletAccount:this.walletAccount,paymentMethods:c,visible:0===s}),n.a.createElement(pr,{intl:a,form:o,paymentMethod:this.paymentMethod,walletAccount:this.walletAccount,marketplaceFee:t,ref:function(t){return e.profitMarginRef=t},visible:1===s}),n.a.createElement(jr,{intl:a,form:o,tags:i,paymentMethod:this.paymentMethod,walletAccount:this.walletAccount,marketplaceFee:t,visible:2===s}),n.a.createElement(J.a.Item,{className:"mt-4",wrapperCol:{xl:{offset:16}}},n.a.createElement("div",{className:"px-xl-3"},s>0&&n.a.createElement(_.a,{onClick:function(){return e.prev()},type:"default"},n.a.createElement($.a,{type:"double-left"}),n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Previous",id:"common.sell_previous"}))),s<2&&n.a.createElement(_.a,{className:"cp-btn-primary",onClick:function(){return e.next()},type:"default"},n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Next",id:"common.sell_next"})),n.a.createElement($.a,{type:"double-right"})),2===s&&n.a.createElement(_.a,{type:"default",loading:f,icon:"save",className:"cp-btn-success",htmlType:"submit"},n.a.createElement("span",null,l&&l.id?n.a.createElement(w.a,{defaultMessage:"Edit Offer",id:"common.sell_edit_offer"}):n.a.createElement(w.a,{defaultMessage:"Create Offer",id:"common.sell_create_offer"})))))))))}}])&&kr(t.prototype,r),a&&kr(t,a),l}(a.Component),qr=Object(T.c)(Object(be.b)((function(e){var t=e.settings.layoutType,r=e.collections,a=r.marketplaceTags,n=r.currencies,o=r.paymentMethods;return{layoutType:t,accounts:e.wallet.accounts,marketplaceTags:a,currencies:n,paymentMethods:o}})),Object(he.a)(),c.i)(Ir);function Dr(e){return(Dr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lr(e,t){return(Lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=zr(e);if(t){var n=zr(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Ur(this,r)}}function Ur(e,t){if(t&&("object"===Dr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kr=Object(E.a)({pageTitle:{id:"meta.title.marketplace_create_offer",defaultMessage:"Create Offer - Marketplace | {name}"}}),Wr=H.a.TabPane,Gr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lr(e,t)}(l,e);var t,r,a,o=Yr(l);function l(){return Br(this,l),o.apply(this,arguments)}return t=l,(r=[{key:"getPageTitle",value:function(){return this.props.intl.formatMessage(Kr.pageTitle,{name:R.a.name})}},{key:"render",value:function(){var e=this.props.location,t={},r=y()(e,"state.offer");return r&&r.id&&("sell"===r.type&&(t=W()(t,{defaultActiveKey:"create_sell_offer"})),"buy"===r.type&&(t=W()(t,{defaultActiveKey:"create_buy_offer"}))),n.a.createElement(n.a.Fragment,null,n.a.createElement(F.Helmet,null,n.a.createElement("title",null,this.getPageTitle())),n.a.createElement(X.a,t,n.a.createElement(Wr,{key:"create_sell_offer",tab:n.a.createElement("span",{className:"d-flex align-items-center"},n.a.createElement("i",{className:"la la-sign-out-alt cp-fs-xl mr-2"}),n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Sell Offer",id:"marketplace.sell_offer"})))},n.a.createElement(qr,{offer:r&&"sell"===r.type&&r})),n.a.createElement(Wr,{key:"create_buy_offer",tab:n.a.createElement("span",{className:"d-flex align-items-center"},n.a.createElement("i",{className:"la la-sign-in-alt cp-fs-xl mr-2"}),n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Buy Offer",id:"marketplace.buy_offer"})))},n.a.createElement(Dt,{offer:r&&"buy"===r.type&&r}))))}}])&&Vr(t.prototype,r),a&&Vr(t,a),l}(a.Component),Hr=Object(T.c)(Object(be.b)((function(e){var t=e.auth;return{auth:new Oe.a(t)}})),O.c)(Gr);function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zr(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ta(e);if(t){var n=ta(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return $r(this,r)}}function $r(e,t){if(t&&("object"===Xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ea(e)}function ea(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ta(e){return(ta=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ra(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aa=Object(E.a)({pageTitle:{id:"meta.title.marketplace_sell_coin",defaultMessage:"Sell Coin - Marketplace | {name}"}}),na=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(l,e);var t,r,a,o=Qr(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ra(ea(t=o.call(this,e)),"applyFilter",(function(e){t.setState({drawerState:!1},(function(){t.table.applyFilter(e)}))})),ra(ea(t),"clearFilter",(function(){t.setState({drawerState:!1},(function(){t.table.clearFilter()}))})),ra(ea(t),"toggleDrawer",(function(){t.setState((function(e){return{drawerState:!e.drawerState}}))})),ra(ea(t),"columns",(function(){return[{title:n.a.createElement(w.a,{defaultMessage:"Buyer",id:"common.buyer"}),dataIndex:"user",render:function(e){return n.a.createElement(k.a,{user:e})}},{title:n.a.createElement(w.a,{defaultMessage:"Coin",id:"common.coin"}),dataIndex:"coin_name"},{title:n.a.createElement(w.a,{defaultMessage:"Payment",id:"common.payment"}),dataIndex:"payment_method",render:function(e,t){return n.a.createElement("div",{style:{whiteSpace:"nowrap"}},n.a.createElement("span",{className:"d-block"},e.name),n.a.createElement("small",{className:"d-block"},t.label))}},{title:n.a.createElement(w.a,{defaultMessage:"Currency",id:"common.currency"}),dataIndex:"currency"},{title:n.a.createElement(w.a,{defaultMessage:"Range",id:"common.range"}),key:"range",render:function(e,t){return n.a.createElement("span",null,n.a.createElement("span",{style:{whiteSpace:"nowrap"}},t.formatted_min_amount),n.a.createElement("span",{className:"font-weight-semi-bold mx-2"},n.a.createElement(w.a,{defaultMessage:"To",id:"common.to"})),n.a.createElement("span",{style:{whiteSpace:"nowrap"}},t.formatted_real_max_amount))}},{title:n.a.createElement(w.a,{defaultMessage:"Rate",id:"common.rate"}),dataIndex:"formatted_rate"},{title:n.a.createElement(w.a,{defaultMessage:"Margin",id:"common.margin"}),dataIndex:"profit_margin",render:function(e){return"".concat(e||0,"%")}},{title:n.a.createElement(w.a,{defaultMessage:"Action",id:"common.action"}),key:"action",fixed:"right",render:function(e,t){var r=Object(c.g)(x.a["marketplace.offer"].path,{slug:t.slug});return n.a.createElement(P.a,{to:r},n.a.createElement(_.a,{type:"default",className:"cp-btn-danger",size:"small"},n.a.createElement("span",null,n.a.createElement(w.a,{defaultMessage:"Sell",id:"common.sell"}))))}}]})),t.state={drawerState:!1},t}return t=l,(r=[{key:"getPageTitle",value:function(){return this.props.intl.formatMessage(aa.pageTitle,{name:R.a.name})}},{key:"render",value:function(){var e=this,t=this.state.drawerState,r=Object(S.b)("marketplace.sell-coin.table"),a=n.a.createElement(M.a,{onApplyFilter:this.applyFilter,onClearFilter:this.clearFilter});return n.a.createElement(n.a.Fragment,null,n.a.createElement(F.Helmet,null,n.a.createElement("title",null,this.getPageTitle())),n.a.createElement(u.a,{gutter:8},n.a.createElement(p.a,{lg:8,xl:6},n.a.createElement(v.a,{styleName:"d-none d-lg-block",title:n.a.createElement(w.a,{defaultMessage:"Filter Result",id:"common.filter_result"})},a)),n.a.createElement(p.a,{lg:16,xl:18},n.a.createElement("div",{className:"d-block d-lg-none"},n.a.createElement(f.a,{visible:t,onClose:this.toggleDrawer,placement:"right",title:n.a.createElement(w.a,{defaultMessage:"Filter Result",id:"common.filter_result"}),closable:!1},n.a.createElement("div",{className:"p-2"},a))),n.a.createElement(v.a,{styleName:"cp-card-table",title:n.a.createElement(w.a,{defaultMessage:"Available Offers",id:"marketplace.available_offers"}),extra:n.a.createElement(_.a,{type:"primary",shape:"circle",className:"mb-0 material-shadow d-block d-lg-none",icon:"filter",onClick:this.toggleDrawer})},n.a.createElement(j.a,{route:r.url(),columns:this.columns(),className:"mt-1",ref:function(t){return e.table=t},scroll:{x:!0,y:!1},size:"middle"})))))}}])&&Zr(t.prototype,r),a&&Zr(t,a),l}(a.Component),oa=Object(T.c)(O.c)(na),la=r("fTA7"),ca=r.n(la),ia=r("v1ta"),ua=r("re1g"),sa=r("amnm"),fa=r("wUfQ"),ma=r("odIg"),pa=r("tpxX"),da=r.n(pa),ya=r("17x9"),ba=r.n(ya);function ha(e){return(ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ga(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Oa(e);if(t){var n=Oa(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Ea(this,r)}}function Ea(e,t){if(t&&("object"===ha(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return wa(e)}function wa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Oa(e){return(Oa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ma(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(l,e);var t,r,a,o=va(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Ma(wa(t=o.call(this,e)),"convert",(function(e,t,r){var a=parseFloat(e);if(Number.isNaN(a))return"";var n=t(a);return da()(n,r).toString()})),Ma(wa(t),"handlePriceChange",(function(e){t.setState({value:e.target.value,scale:"price"},(function(){t.triggerControlChange()}))})),Ma(wa(t),"handleCoinChange",(function(e){t.setState({value:e.target.value,scale:"coin"},(function(){t.triggerControlChange()}))})),Ma(wa(t),"toCoin",(function(e){return e/t.props.unitPrice})),Ma(wa(t),"toPrice",(function(e){return e*t.props.unitPrice})),t.state={value:e.value,scale:"price"},t}return t=l,(r=[{key:"triggerControlChange",value:function(){var e=this.props.onChange;if("function"==typeof e){var t=this.state,r=t.value,a=t.scale;if("coin"===a){var n=this.convert(r,this.toPrice,2);e(parseFloat(n))}else"price"===a&&e(parseFloat(r))}}},{key:"render",value:function(){var e=this.props,t=e.coinSymbol,r=e.currency,a=e.precision,o=this.state,l=o.value,c=o.scale,i="coin"===c?this.convert(l,this.toPrice,2):l,s="price"===c?this.convert(l,this.toCoin,a):l;return n.a.createElement("div",null,n.a.createElement(pt.a.Group,null,n.a.createElement(u.a,{gutter:8},n.a.createElement(p.a,{xs:12,style:{marginBottom:"0"}},n.a.createElement(pt.a,{addonAfter:t,onChange:this.handleCoinChange,value:s})),n.a.createElement(p.a,{xs:12,style:{marginBottom:"0"}},n.a.createElement(pt.a,{addonAfter:r,onChange:this.handlePriceChange,value:i})))))}}])&&ga(t.prototype,r),a&&ga(t,a),l}(a.Component);ja.protoType={coinSymbol:ba.a.string.isRequired,currency:ba.a.string.isRequired,unitPrice:ba.a.number.isRequired,precision:ba.a.number.isRequired};var Sa=ja;function ka(e){return(ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pa(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ta(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Fa(e);if(t){var n=Fa(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Na(this,r)}}function Na(e,t){if(t&&("object"===ka(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ra(e)}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Aa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ca=Object(E.a)({successful:{id:"offer.start_trade_action_successful",defaultMessage:"Trade started successfully!"},pageTitle:{id:"meta.title.marketplace_offer",defaultMessage:"{title} | {name}"}}),Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}(l,e);var t,r,a,o=Ta(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),Aa(Ra(t=o.call(this,e)),"goToChat",(function(e){var r=t.props.history,a=Object(c.g)(x.a["chat.view"].path,{token:e});if(!pe()(r))return r.push(a)})),Aa(Ra(t),"handleSubmit",(function(e){e.preventDefault();var r=t.api,a=r.axios,n=r.route,o=t.state,l=o.loading,c=o.offer,i=t.props,u=i.form,s=i.intl;if(!l&&t.canStartTrade()){var f=n("marketplace.offer.start-trade",{offer:c.slug});u.validateFields((function(e,r){pe()(e)&&(a.post(f.url(),r).then((function(e){return Object(ge.c)(e,u,(function(e){t.setState({confirmLoading:!1}),t.goToChat(e.chat_id)}),s.formatMessage(Ca.successful))})).catch((function(e){return Object(ge.b)(e,u,r,(function(){t.setState({confirmLoading:!1})}))})),t.setState({confirmLoading:!0}))}))}})),Aa(Ra(t),"fetchOffer",(function(){var e=t.api,r=e.axios,a=e.route,n=t.props.match;t.setState({loading:!0});var o=a("marketplace.offer.get",{offer:n.params.slug}).url();r.get(o).then((function(e){return Object(ge.d)(e,(function(e){t.setState({offer:e,loading:!1})}))})).catch((function(e){return Object(ge.a)(e,(function(){t.setState({offer:{},loading:!1})}))}))})),Aa(Ra(t),"getSharableLink",(function(){if("undefined"!=typeof window)return window.location.href})),t.api=new S.a,t.state={offer:{},confirmLoading:!1,loading:!1},t}return t=l,(r=[{key:"componentDidMount",value:function(){this.fetchOffer()}},{key:"shouldVerifyEmail",value:function(){var e=this.state.offer,t=this.props.auth;return e.require_email_verification&&!t.verifiedEmail()}},{key:"shouldVerifyPhone",value:function(){var e=this.state.offer,t=this.props.auth;return e.require_phone_verification&&!t.verifiedPhone()}},{key:"canStartTrade",value:function(){var e=this.props.auth,t=this.state.offer;return t.visibility&&e.check()&&e.user.id!==t.user.id&&!this.shouldVerifyEmail()&&!this.shouldVerifyPhone()}},{key:"componentDidUpdate",value:function(e,t,r){var a=this.props.match.params,n=e.match.params;a.slug!==n.slug&&(this.fetchOffer(),console.log("Updated Offer Component"))}},{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"getPageTitle",value:function(){var e=this.props.intl,t=this.state.offer;return e.formatMessage(Ca.pageTitle,{name:R.a.name,title:t.title})}},{key:"render",value:function(){var e=this.props.auth,t=this.props.form.getFieldDecorator,r=this.state,a=r.loading,o=r.offer,l=r.confirmLoading,c=this.getSharableLink();return pe()(o)?a?n.a.createElement(ia.a,null):n.a.createElement(ua.a,null):n.a.createElement(n.a.Fragment,null,n.a.createElement(F.Helmet,null,n.a.createElement("title",null,this.getPageTitle())),n.a.createElement(u.a,{gutter:8},n.a.createElement(p.a,{xl:16,lg:14,md:14},n.a.createElement(v.a,null,n.a.createElement("h2",{className:"text-uppercase"},"sell"===o.type&&n.a.createElement(w.a,{defaultMessage:"How much do you want to buy?",id:"offer.how_much_buy"}),"buy"===o.type&&n.a.createElement(w.a,{defaultMessage:"How much do you want to sell?",id:"offer.how_much_sell"})),n.a.createElement(J.a,{className:"mt-3",onSubmit:this.handleSubmit},n.a.createElement(J.a.Item,{labelAlign:"left",label:n.a.createElement(w.a,{defaultMessage:"Enter Amount",id:"offer.enter_amount"})},t("amount",{rules:[{type:"number",required:!0,min:o.min_amount,max:o.real_max_amount}]})(n.a.createElement(Sa,{currency:o.currency,precision:o.coin_precision,coinSymbol:o.coin_symbol,unitPrice:o.rate}))),o.visibility?!this.canStartTrade()&&n.a.createElement("div",{className:"my-2"},n.a.createElement(je.a,{message:n.a.createElement(w.a,{defaultMessage:"Unable to Start Trade",id:"offer.unable_to_start_trade"}),description:n.a.createElement("ol",{className:"mt-1 pl-3 mb-0"},e.check()?n.a.createElement(n.a.Fragment,null,e.user.id===o.user.id?n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"You cannot start a trade with yourself!",id:"offer.cannot_start_trade_with_self_desc"})):n.a.createElement(n.a.Fragment,null,this.shouldVerifyPhone()&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"{phone} verification is required by the owner",id:"offer.phone_verification_required_desc",values:{phone:n.a.createElement("b",null,n.a.createElement(w.a,{defaultMessage:"Phone",id:"common.phone"}))}})),this.shouldVerifyEmail()&&n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"{email} verification is required by the owner",id:"offer.email_verification_required_desc",values:{email:n.a.createElement("b",null,n.a.createElement(w.a,{defaultMessage:"Email",id:"common.email"}))}})))):n.a.createElement("li",null,n.a.createElement(w.a,{id:"offer.authentication_required_desc",defaultMessage:"You need to {register} or {login} to continue with the trade.",values:{register:n.a.createElement("b",null,n.a.createElement(w.a,{defaultMessage:"Register",id:"common.register"})),login:n.a.createElement("b",null,n.a.createElement(w.a,{defaultMessage:"Login",id:"common.login"}))}}))),type:"warning",showIcon:!0})):n.a.createElement(je.a,{className:"mb-1",type:"warning",message:n.a.createElement(w.a,{id:"offer.unavailable_info",defaultMessage:"This offer is {unavailable}. This can be because the owner has disable the offer, cannot currently interact with the platform, or they do not have enough balance to fulfill the offer.",values:{unavailable:n.a.createElement("span",{className:"text-uppercase font-weight-bold"},n.a.createElement(w.a,{defaultMessage:"Unavailable",id:"common.unavailable"}))}}),showIcon:!0}),n.a.createElement(J.a.Item,null,n.a.createElement(_.a,{type:"primary",size:"large",loading:l,icon:"lock",disabled:!this.canStartTrade(),htmlType:"submit",block:!0},n.a.createElement("span",{className:"text-uppercase"},"sell"===o.type&&n.a.createElement(w.a,{defaultMessage:"Buy Now!",id:"offer.buy_now"}),"buy"===o.type&&n.a.createElement(w.a,{defaultMessage:"Sell Now!",id:"offer.sell_now"})))),n.a.createElement(u.a,{gutter:8},n.a.createElement(p.a,{sm:12,className:"my-2"},n.a.createElement(je.a,{type:"info",message:n.a.createElement("div",null,n.a.createElement("div",{className:"font-weight-medium"},n.a.createElement(w.a,{defaultMessage:"Offer Information",id:"offer.offer_information"})),n.a.createElement("ol",{className:"mt-1 pl-3 mb-0"},n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"Your amount should be between {minimum} and {maximum}!",id:"offer.amount_range_information",values:{maximum:n.a.createElement("b",null,o.formatted_real_max_amount),minimum:n.a.createElement("b",null,o.formatted_min_amount)}})),n.a.createElement("li",null,n.a.createElement(w.a,{defaultMessage:"Rate per {coin_name} is {price}. You can buy any fraction",id:"offer.rate_information",values:{coin_name:n.a.createElement("b",null,o.coin_name),price:n.a.createElement("b",null,o.formatted_rate)}}))))})),n.a.createElement(p.a,{sm:12,className:"my-2"},n.a.createElement(je.a,{type:"warning",message:n.a.createElement("div",null,n.a.createElement("div",{className:"font-weight-medium"},n.a.createElement(w.a,{defaultMessage:"Payment Verification",id:"offer.payment_verification_warning"})),n.a.createElement("div",{className:"mt-1"},n.a.createElement(w.a,{defaultMessage:"The buyer of this trade has a time limit of {deadline} to pay for the trade before the trade is cancelled by the system. Trade will not auto-cancel when buyer has marked trade as paid, after which buyer has to wait for seller to release coin.",id:"offer.confirmation_time_information",values:{deadline:n.a.createElement("b",null,o.confirmation_time_frame," minutes")}})))})))),n.a.createElement(ft.a,null,n.a.createElement(w.a,{defaultMessage:"Owner Terms",id:"offer.owner_terms"})),n.a.createElement("p",{style:{whiteSpace:"pre-line"},className:"font-italic cp-fs-lg"},o.terms))),n.a.createElement(p.a,{xl:8,lg:10,md:10},n.a.createElement(v.a,{actions:c&&[n.a.createElement("a",{href:"//twitter.com/intent/tweet?url=".concat(c)},n.a.createElement("i",{className:"lab la-twitter cp-fs-2x"})),n.a.createElement("a",{href:"//reddit.com/submit?url=".concat(c)},n.a.createElement("i",{className:"lab la-reddit cp-fs-2x"})),n.a.createElement("a",{href:"//www.facebook.com/sharer.php?u=".concat(c)},n.a.createElement("i",{className:"lab la-facebook cp-fs-2x"}))]},n.a.createElement("div",{className:"text-center mb-3"},n.a.createElement(sa.a,{user:o.user,className:"cp-fs-3x",size:150})),n.a.createElement("h2",{className:"mt-2 mb-1 cp-fs-xxl font-weight-light text-center"},n.a.createElement("span",{className:"mr-2"},n.a.createElement(P.a,{to:"/profile/".concat(o.user.name)},o.user.name)),o.user.location&&n.a.createElement(Ie.a,{code:o.user.location.iso_code})),n.a.createElement("div",{className:"cp-fs-lg text-center"},n.a.createElement(ca.a,{value:o.user.average_marketplace_rating,disabled:!0}),n.a.createElement("span",{className:"ml-2"},"(",Object(fa.a)(o.user.total_marketplace_rating),")")),o.user.last_seen_at&&n.a.createElement("div",{className:"mt-2 align-items-center d-flex justify-content-center"},n.a.createElement("i",{className:"la la-clock cp-fs-xl"}),n.a.createElement("span",{className:"ml-2"},Object(T.g)(o.user.last_seen_at)))),n.a.createElement(ma.a,{user:o.user}))))}}])&&Pa(t.prototype,r),a&&Pa(t,a),l}(a.Component),qa=Object(T.c)(Object(be.b)((function(e){var t=e.auth;return{auth:new Oe.a(t)}})),Object(he.a)())(Ia);t.default=function(e){var t=e.match.path;return n.a.createElement(c.e,null,n.a.createElement(o.a,{from:"".concat(t,"/"),to:"".concat(t,"/buy_coin"),exact:!0,status:301}),n.a.createElement(c.b,{path:"".concat(t,"/offer/:slug"),component:qa}),n.a.createElement(c.b,{path:"".concat(t,"/buy_coin"),component:z}),n.a.createElement(l.a,{path:"".concat(t,"/create_offer"),component:Hr}),n.a.createElement(c.b,{path:"".concat(t,"/sell_coin"),component:oa}),n.a.createElement(c.b,{component:ua.a}))}},HDGS:function(e,t,r){"use strict";var a=r("N9UN"),n=r.n(a),o=r("q1tI"),l=r.n(o),c=["styleName"];function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var s=function(e){var t=e.styleName,r=u(e,c);return l.a.createElement(n.a,i({bordered:!1,className:"cp-card-widget ".concat(t)},r))};s.defaultProps={styleName:""},t.a=s},Ikkh:function(e,t,r){"use strict";var a=r("j7zX"),n=r.n(a),o=r("3OWR"),l=r.n(o),c=r("q1tI"),i=r.n(c),u=r("BflS"),s=r("/MKj"),f=r("iNPk"),m=r("Ty5D");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=E(e);if(t){var n=E(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return _(this,r)}}function _(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return v(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,r,a,o=g(c);function c(){var e;y(this,c);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return w(v(e=o.call.apply(o,[this].concat(r))),"onTabChange",(function(t){"undefined"!=typeof sessionStorage&&sessionStorage.setItem(e.getStorageKey(),t)})),e}return t=c,(r=[{key:"getStorageKey",value:function(){return"page.tab(".concat(this.props.location.pathname,")")}},{key:"getTabPosition",value:function(){var e=this.props.windowSize.width;return e&&e<u.l?"top":"left"}},{key:"getDefaultActiveKey",value:function(){var e=void 0;return"undefined"!=typeof sessionStorage&&(e=sessionStorage.getItem(this.getStorageKey())||void 0),e}},{key:"render",value:function(){var e=this.getDefaultActiveKey(),t={};return e&&(t=l()(t,{defaultActiveKey:e})),i.a.createElement(n.a,d({onChange:this.onTabChange,tabPosition:this.getTabPosition()},t,this.props))}}])&&b(t.prototype,r),a&&b(t,a),c}(c.Component);t.a=Object(f.c)(Object(s.b)((function(e){return{windowSize:e.settings.windowSize}})),m.i)(O)},T0ja:function(e,t,r){"use strict";var a=r("q1tI"),n=r.n(a),o=r("amnm"),l=r("gCZO"),c=r("55Ip"),i=r("mLH4"),u=r("wUfQ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=b(e);if(t){var n=b(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(y,e);var t,r,a,s=d(y);function y(){return f(this,y),s.apply(this,arguments)}return t=y,(r=[{key:"render",value:function(){var e=this.props,t=e.user;return e.showRatingsCount,n.a.createElement("div",{style:{whiteSpace:"nowrap"},className:"cp-user-cell d-flex align-items-center"},n.a.createElement(o.a,{user:t}),n.a.createElement("div",{className:"ml-2"},n.a.createElement("div",{className:"d-flex"},n.a.createElement("div",{className:"text-truncate d-inline-block mr-2"},n.a.createElement(c.a,{to:"/profile/".concat(t.name)},t.name)),t.location&&n.a.createElement(i.a,{code:t.location.iso_code})),n.a.createElement("div",{className:"d-flex align-items-center"},n.a.createElement(l.a,{value:t.average_marketplace_rating}),n.a.createElement("span",{className:"ml-2 mt-1"},"(",Object(u.a)(t.total_marketplace_rating),")"))))}}])&&m(t.prototype,r),a&&m(t,a),y}(a.Component);t.a=h},eLk5:function(e,t,r){"use strict";var a=r("DtFj"),n=r.n(a),o=r("3OWR"),l=r.n(o),c=r("wEy/"),i=r.n(c),u=r("UfWW"),s=r.n(u),f=r("q1tI"),m=r.n(f),p=r("Falu"),d=r("mP/V");function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=["route","pagination","filters"];function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=P(e);if(t){var n=P(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return S(this,r)}}function S(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,r,a,o=j(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),x(k(t=o.call(this,e)),"handleTableChange",(function(e,r){t.setState((function(t){return{pagination:w(w({},t.pagination),{},{current:e.current}),filters:w(w({},t.filters),r)}}),(function(){t.fetchData()}))}));var r=e.route,a=e.pagination,n=e.filters;return t.api=new p.a,t.pagination=new d.a(t.api,r),t.state={data:[],pagination:a||{},filters:n||{},loading:!1},t}return t=c,(r=[{key:"updateItem",value:function(e,t){var r=this.props.rowKey||"id";t="function"!=typeof t?function(t){return t[r]===e[r]}:t;var a=_(this.state.data),n=s()(a,t);n>=0&&(a[n]=e),this.setState({data:a})}},{key:"removeItem",value:function(e,t){var r=this.props.rowKey||"id";t="function"!=typeof t?function(t){return t[r]===e[r]}:t;var a=_(this.state.data),n=s()(a,t);n>=0&&i()(a,(function(e,t){return t===n})),this.setState({data:a})}},{key:"componentDidMount",value:function(){this.fetchData()}},{key:"applyFilter",value:function(e){var t=this;this.setState((function(t){var r=t.pagination,a=t.filters;return{pagination:l()(r,{current:1}),filters:l()(a,e)}}),(function(){t.fetchData()}))}},{key:"clearFilter",value:function(){var e=this;this.setState((function(e){var t=e.pagination;return{filters:{},pagination:l()(t,{current:1})}}),(function(){e.fetchData()}))}},{key:"fetchData",value:function(){var e=this,t=this.state,r=t.pagination,a=t.filters;this.pagination.fetchData(r,a,(function(t){e.setState((function(e){return{pagination:w(w({},e.pagination),{},{total:void 0!==t.total?t.total:t.meta.total}),data:t.data,loading:!1}}))}),(function(){e.setState({loading:!1})})),this.setState({loading:!0})}},{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"render",value:function(){var e=this.props,t=(e.route,e.pagination,e.filters,g(e,b)),r=this.state,a=r.loading,o=r.data;return m.a.createElement(n.a,h({size:"middle",rowKey:"id"},t,{pagination:this.state.pagination,onChange:this.handleTableChange,dataSource:o,loading:a}))}}])&&O(t.prototype,r),a&&O(t,a),c}(f.Component);t.a=T},gCZO:function(e,t,r){"use strict";var a=r("fTA7"),n=r.n(a),o=r("Pbn2"),l=r.n(o),c=r("q1tI"),i=r.n(c);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=b(e);if(t){var n=b(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,a,o=d(c);function c(){return f(this,c),o.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return i.a.createElement(n.a,s({disabled:!0,character:i.a.createElement(l.a,{type:"star",style:{fontSize:"15px"},theme:"filled"}),allowHalf:!0},this.props))}}])&&m(t.prototype,r),a&&m(t,a),c}(c.Component);t.a=h},mLH4:function(e,t,r){"use strict";var a=r("aAZC"),n=r.n(a),o=r("q1tI"),l=r.n(o);t.a=function(e){var t=e.code;return l.a.createElement("span",{className:"flag-icon mr-2 flag-icon-".concat(n()(t))})}},odIg:function(e,t,r){"use strict";var a=r("MM9K"),n=r.n(a),o=r("IztG"),l=r.n(o),c=r("hqwM"),i=r.n(c),u=r("E+oP"),s=r.n(u),f=r("q1tI"),m=r.n(f),p=r("24R3"),d=r("HDGS"),y=r("Falu"),b=r("mP/V"),h=r("iNPk"),g=r("55Ip"),_=r("mLH4"),v=r("amnm"),E=r("gCZO");function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=T(e);if(t){var n=T(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return x(this,r)}}function x(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(c,e);var t,r,a,o=P(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).api=new y.a,t.state={data:[],loading:!1,hasMore:!1,params:{pageSize:10}};var r=t.api.route("user.marketplace-ratings",{name:e.user.name}).url();return t.pagination=new b.a(t.api,r),t}return t=c,(r=[{key:"componentDidMount",value:function(){this.fetchUserRatings()}},{key:"fetchUserRatings",value:function(){var e=this;this.setState({loading:!0});var t=M(M({},this.state.params),{},{current:1});this.pagination.fetchData(t,{},(function(r){e.setState({data:r.data,loading:!1,hasMore:Boolean(r.links.next),params:M(M({},t),{},{total:r.meta.total})})}),(function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e,t,r){var a=this.props.user,n=e.user;a.id!==n.id&&this.fetchUserRatings()}},{key:"componentWillUnmount",value:function(){this.api.cancel()}},{key:"render",value:function(){var e=this.state,t=e.data,r=e.loading;return m.a.createElement(d.a,{styleName:"cp-card-reviews",title:m.a.createElement(p.a,{defaultMessage:"Latest Marketplace Reviews",id:"common.latest_marketplace_reviews"})},m.a.createElement(n.a,{spinning:r},m.a.createElement("div",{className:"cp-profile-reviews-scroll","data-simplebar":!0},m.a.createElement(i.a,{itemLayout:"vertical",dataSource:t,renderItem:function(e){var t=e.rater;return s()(t)?m.a.createElement(i.a.Item,null):m.a.createElement(i.a.Item,null,m.a.createElement(l.a,{content:Object(h.f)(e.comment,200),avatar:m.a.createElement(v.a,{user:t}),datetime:m.a.createElement("span",null,Object(h.b)(e.created_at,"MMMM Do YYYY")),actions:[m.a.createElement(E.a,{value:e.rating})],author:m.a.createElement("div",{className:"d-flex"},m.a.createElement("span",{className:"mr-2"},m.a.createElement(g.a,{to:"/profile/".concat(t.name)},t.name)),t.location&&m.a.createElement(_.a,{code:t.location.iso_code}))}))}}))))}}])&&S(t.prototype,r),a&&S(t,a),c}(f.Component);t.a=N},qiO9:function(e,t,r){"use strict";var a=r("4IMT"),n=r.n(a),o=r("5Dct"),l=r.n(o),c=r("FErh"),i=r.n(c),u=r("7GkX"),s=r.n(u),f=r("qu0K"),m=r.n(f),p=r("bt/X"),d=r.n(p),y=r("P/G1"),b=r.n(y),h=r("E+oP"),g=r.n(h),_=r("FAat"),v=r.n(_),E=r("q1tI"),w=r.n(E),O=r("7++0"),M=r("24R3"),j=r("iNPk"),S=r("4ztd"),k=r("/MKj");function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=C(e);if(t){var n=C(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return F(this,r)}}function F(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var q=v.a.Option,D=v.a.OptGroup,B=Object(O.a)({country:{id:"filter_result.select_country_placeholder",defaultMessage:"Select country..."},coin:{id:"filter_result.select_coin_placeholder",defaultMessage:"Select coin..."},currency:{id:"filter_result.select_currency_placeholder",defaultMessage:"Select currency..."},paymentMethod:{id:"filter_result.select_payment_method_placeholder",defaultMessage:"Select payment method..."},tags:{id:"filter_result.select_tags_placeholder",defaultMessage:"Filter by tags..."},amount:{id:"filter_result.input_amount_placeholder",defaultMessage:"Filter by amount..."}}),V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(c,e);var t,r,a,o=R(c);function c(){var e;x(this,c);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return I(A(e=o.call.apply(o,[this].concat(r))),"applyFilter",(function(){var t=e.props,r=t.onApplyFilter;t.form.validateFields((function(e,t){if("function"==typeof r&&g()(e))return r(t)}))})),I(A(e),"clearFilter",(function(){var t=e.props,r=t.onClearFilter;if(t.form.resetFields(),"function"==typeof r)return r()})),e}return t=c,(r=[{key:"render",value:function(){var e=this.props.form,t=e.getFieldDecorator,r=e.getFieldsValue,a=this.props,o=a.intl,c=a.currencies,u=a.countries,f=a.wallets,p=a.paymentMethods,y=a.marketplaceTags,h=b()(r()).some((function(e){return e})),g=d()(p,(function(e){return e.category.name}));return w.a.createElement(m.a,{className:"p-1"},w.a.createElement(m.a.Item,{className:"mb-3",label:w.a.createElement(M.a,{defaultMessage:"By Coin",id:"marketplace.filter_by_coin"})},t("coin_identifier")(w.a.createElement(v.a,{optionFilterProp:"children",placeholder:o.formatMessage(B.coin),showSearch:!0,style:{width:"100%"}},f.map((function(e){return w.a.createElement(q,{key:e.coin.id,value:e.coin.identifier},e.coin.name)}))))),w.a.createElement(m.a.Item,{className:"mb-3",label:w.a.createElement(M.a,{defaultMessage:"By Currency",id:"marketplace.filter_by_currency"})},t("currency")(w.a.createElement(v.a,{optionFilterProp:"children",placeholder:o.formatMessage(B.currency),showSearch:!0,style:{width:"100%"}},s()(c).map((function(e){return w.a.createElement(q,{key:e,value:i()(e)},c[e].name," (",c[e].code,")")}))))),w.a.createElement(m.a.Item,{className:"mb-3",label:w.a.createElement(M.a,{defaultMessage:"By Country",id:"marketplace.filter_by_country"})},t("country")(w.a.createElement(v.a,{optionFilterProp:"children",placeholder:o.formatMessage(B.country),showSearch:!0,style:{width:"100%"}},s()(u).map((function(e){return w.a.createElement(q,{key:e,value:i()(e)},u[e])}))))),w.a.createElement(m.a.Item,{className:"mb-3",label:w.a.createElement(M.a,{defaultMessage:"By Payment Method",id:"marketplace.filter_by_payment_method"})},t("payment_method_id")(w.a.createElement(v.a,{optionFilterProp:"children",placeholder:o.formatMessage(B.paymentMethod),showSearch:!0,style:{width:"100%"}},s()(g).map((function(e,t){return w.a.createElement(D,{key:t,label:e},g[e].map((function(e){return w.a.createElement(q,{key:e.id,value:e.id},e.name)})))}))))),w.a.createElement(m.a.Item,{className:"mb-3",label:w.a.createElement(M.a,{defaultMessage:"By Tags",id:"marketplace.filter_by_tags"})},t("tags")(w.a.createElement(v.a,{optionFilterProp:"children",placeholder:o.formatMessage(B.tags),showSearch:!0,mode:"tags",style:{width:"100%"}},y.map((function(e){return w.a.createElement(q,{key:e.id,value:e.name},e.name)}))))),w.a.createElement(m.a.Item,{className:"mb-3",label:w.a.createElement(M.a,{defaultMessage:"Amount",id:"marketplace.filter_amount"})},t("amount")(w.a.createElement(l.a,{style:{width:"100%"},placeholder:o.formatMessage(B.amount),min:1,step:1}))),w.a.createElement(m.a.Item,{className:"mt-3 mb-0"},w.a.createElement(n.a,{type:"primary",onClick:this.applyFilter,block:!0},w.a.createElement(M.a,{defaultMessage:"Apply Filter",id:"filter_result.apply_filter"}))),h&&w.a.createElement(m.a.Item,{className:"mt-0"},w.a.createElement(n.a,{type:"default",onClick:this.clearFilter,block:!0},w.a.createElement(M.a,{defaultMessage:"Clear Filter",id:"filter_result.clear_filter"}))))}}])&&T(t.prototype,r),a&&T(t,a),c}(E.Component);t.a=Object(j.c)(Object(k.b)((function(e){var t=e.settings.layoutType,r=e.collections,a=r.currencies,n=r.marketplaceTags,o=r.wallets,l=r.paymentMethods;return{layoutType:t,marketplaceTags:n,wallets:o,countries:r.countries,paymentMethods:l,currencies:a}})),Object(S.a)())(V)},wUfQ:function(e,t,r){"use strict";var a=r("o0o1"),n=r.n(a);function o(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){i=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(i)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s={base:1e3,precision:2,decimalSeparator:".",lowerCase:!1,space:!1,units:["","K","M","B","T","P","E"]},f=function(e){var t=parseFloat(e);if(Number.isNaN(t))throw new Error("Value must be a valid number");if(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)throw new RangeError("Value is either too big or too small");return t},m=n.a.mark((function e(t,r){var a,o,l;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r,o=0;case 2:if(!((l=t/a)<1)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,{result:l,count:++o};case 8:a*=r,e.next=2;break;case 11:case"end":return e.stop()}}),e)})),p=function(e,t){if(!Number.isFinite(e))throw new Error("Value must be a finite number");if(!Number.isInteger(t)||t<0)throw new Error("Precision must be a non-negative integer");return Number.isInteger(e)?e:parseFloat(e.toFixed(t))};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i(i({},s),t);if(!Array.isArray(r.units)||!r.units.length)throw new Error("Units must be an array");var a=f(e),n=a<0?"-":"";a=Math.abs(a);var l,c=0,u=o(m(a,r.base));try{for(u.s();!(l=u.n()).done;){var d=l.value;a=d.result,c=d.count}}catch(e){u.e(e)}finally{u.f()}c=c>r.units.length?r.units.length-1:c;var y=r.lowerCase?r.units[c].toLowerCase():r.units[c],b=r.space?" ":"",h=p(a,r.precision),g=h.toString().replace(".",r.decimalSeparator);return"".concat(n).concat(g).concat(b).concat(y)}}};